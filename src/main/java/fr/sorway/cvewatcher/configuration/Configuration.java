package fr.sorway.cvewatcher.configuration;

import io.github.cdimascio.dotenv.Dotenv;

import java.util.HashMap;
import java.util.Map;

public class Configuration {
    private final Map<String, String> values;
    private final Dotenv dotenv;

    public Configuration() {
        this.values = new HashMap<>();
        this.dotenv = Dotenv.load();
    }

    public void load() {
        values.clear();
        dotenv.entries().forEach(dotenvEntry -> values.put(dotenvEntry.getKey(), dotenvEntry.getValue()));
    }

    public String getString(String key) {
        if (!values.containsKey(key.toUpperCase()))
            throw new NullPointerException("Value not found (" + key + ")");
        return values.get(key.toUpperCase());
    }

    public int getInt(String key) {
        if (!values.containsKey(key.toUpperCase()))
            throw new NullPointerException("Value not found (" + key + ")");
        return Integer.parseInt(values.get(key));
    }

    public boolean getBoolean(String key) {
        if (!values.containsKey(key.toUpperCase()))
            throw new NullPointerException("Value not found (" + key + ")");
        return Boolean.parseBoolean(values.get(key));
    }

    public Dotenv getDotenv() {
        return dotenv;
    }
}
